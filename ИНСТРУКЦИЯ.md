# Быстрая инструкция по развертыванию

## Шаги для развертывания на Railway

### 1. Подготовка репозитория

Если у вас еще нет Git репозитория:
```bash
git init
git add .
git commit -m "Minecraft server setup"
```

Загрузите код на GitHub (создайте репозиторий и выполните `git push`).

### 2. Создание проекта на Railway

1. Зайдите на https://railway.app
2. Войдите через GitHub
3. Нажмите "New Project"
4. Выберите "Deploy from GitHub repo"
5. Выберите ваш репозиторий с Minecraft сервером

### 3. Настройка переменных окружения

В настройках проекта Railway → Variables добавьте:

**Обязательно:**
- `MEMORY=6G` (по умолчанию уже установлено 6G, но можно изменить)

**Для кастомных сборок:**
- `CUSTOM_SERVER_URL=https://ваш-url-к-сборке.jar` (URL для скачивания кастомной сборки)
  - Например: `https://example.com/path/to/custom-server.jar`
  - Или прямая ссылка на файл с GitHub Releases, Dropbox, Google Drive и т.д.

**Для стандартного сервера (если не используете кастомную сборку):**
- `MINECRAFT_VERSION=latest` (или конкретную версию, например `1.20.1`)

**Важно:** Если указан `CUSTOM_SERVER_URL`, стандартный сервер скачиваться не будет!

### 4. Настройка постоянного хранилища (ВАЖНО!)

Чтобы мир не терялся при перезапуске:

1. В Railway: **Settings → Volumes** (или **Storage**)
2. Нажмите **"+ New Volume"** или **"+ Add Volume"**
3. Укажите:
   - **Mount Path**: `/minecraft/world`
   - **Name**: `minecraft-world`
4. Сохраните

**Без Volume мир будет теряться при каждом перезапуске!**

### 5. Ожидание развертывания

Railway автоматически:
- Соберет Docker образ
- Запустит сервер
- Назначит публичный URL

### 6. Получение адреса сервера

1. В настройках сервиса Railway найдите раздел "Networking"
2. Railway создаст публичный домен (например: `minecraft-server-production.up.railway.app`)
3. Проверьте порт в настройках или логах (Railway может использовать переменную `PORT`)

### 7. Подключение в игре

**Подробная инструкция находится в файле `ПОДКЛЮЧЕНИЕ_К_СЕРВЕРУ.md`**

Кратко:
1. Откройте Minecraft
2. Multiplayer → Add Server
3. Введите адрес: `ваш-домен.up.railway.app:PORT`
   - Если порт 25565, можно не указывать
   - Если другой порт, укажите его после двоеточия
4. Нажмите "Done" и подключитесь к серверу

**Как узнать адрес:**
- В Railway: Settings → Networking → Public Domain
- Порт можно найти в логах или в переменных окружения (PORT)

## Важные замечания

⚠️ **Порт**: Railway может назначить случайный порт. Проверьте логи или настройки сервиса, чтобы узнать точный порт.

⚠️ **Память**: По умолчанию установлено 6GB памяти. Можно изменить через переменную окружения `MEMORY`.

⚠️ **Кастомные сборки**: Для использования кастомных сборок (моды, плагины) укажите переменную `CUSTOM_SERVER_URL` с прямым URL к файлу .jar

⚠️ **Стоимость**: Railway предоставляет $5 бесплатных кредитов в месяц. После исчерпания сервер остановится.

⚠️ **EULA**: Файл `eula.txt` уже настроен на `eula=true`. Если сервер не запускается, проверьте логи.

## Просмотр логов

В Railway перейдите в раздел "Deployments" → выберите последний деплой → "View Logs"

## Перезапуск сервера

В Railway: Settings → Restart Service

## Изменение настроек сервера

1. Отредактируйте `server.properties` в репозитории
2. Закоммитьте изменения: `git commit -am "Update server settings"`
3. Загрузите: `git push`
4. Railway автоматически пересоберет и перезапустит сервер

## Решение проблем

**Сервер не запускается:**
- Проверьте логи в Railway
- Убедитесь, что `eula.txt` содержит `eula=true`
- Увеличьте `MEMORY` до 2G или 3G

**Не могу подключиться:**
- Проверьте правильность адреса и порта
- Убедитесь, что сервер запущен (зеленый статус в Railway)
- Проверьте логи на наличие ошибок

**Медленная работа:**
- Увеличьте `MEMORY` до 2G-3G
- Уменьшите `view-distance` в `server.properties`

