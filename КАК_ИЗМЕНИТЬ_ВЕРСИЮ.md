# Как изменить версию Minecraft на сервере

## Способ 1: Через переменные окружения Railway (рекомендуется)

### Шаги:

1. Откройте ваш проект на Railway: https://railway.app
2. Выберите сервис с Minecraft сервером
3. Перейдите в **Settings → Variables**
4. Найдите переменную `MINECRAFT_VERSION` или создайте её, если её нет
5. Установите нужную версию:
   - `latest` - последняя стабильная версия
   - `1.21.11` - конкретная версия (например, 1.21.11)
   - `1.20.4` - другая версия
   - `1.19.4` - более старая версия
6. Сохраните изменения
7. **Перезапустите сервис** (Settings → Restart Service)

### Важно:
- После изменения версии сервер автоматически скачает новую версию при следующем запуске
- Старый `server.jar` будет заменен новым
- Мир может быть несовместим с новой версией - сделайте бэкап перед изменением!

---

## Способ 2: Через веб-интерфейс (когда будет готов)

После создания веб-интерфейса на Lovable:

1. Откройте страницу управления сервером
2. Найдите раздел "Версия Minecraft"
3. Выберите версию из списка или введите вручную
4. Нажмите "Изменить версию"
5. Перезапустите сервер

### API Endpoint для изменения версии:

```
POST /api/version/change
Content-Type: application/json
Body: {
  "version": "1.21.11"
}
```

Ответ:
```json
{
  "success": true,
  "message": "Версия изменена на 1.21.11. Перезапустите сервер для применения изменений.",
  "version": "1.21.11"
}
```

### Получение текущей версии:

```
GET /api/version
```

Ответ:
```json
{
  "current_version": "1.21.11",
  "latest_version": "1.21.11",
  "available_versions": ["1.21.11", "1.21.10", "1.21.9", ...]
}
```

---

## Способ 3: Через кастомную сборку (модпак)

Если нужна кастомная версия или модпак:

1. Загрузите ZIP архив с нужной версией через веб-интерфейс
2. Архив должен содержать `server.jar`
3. Сервер автоматически использует `server.jar` из архива
4. Это переопределит стандартную версию

---

## Доступные версии

Сервер поддерживает все версии Minecraft, доступные через официальный манифест:
- Последние версии: 1.21.x, 1.20.x, 1.19.x и т.д.
- Snapshot версии (если доступны)
- Любые версии из официального репозитория Mojang

### Как узнать доступные версии:

1. Через API: `GET /api/version` - вернет список последних версий
2. Или посмотрите на сайте: https://minecraft.wiki/w/Java_Edition_version_history

---

## Важные замечания

⚠️ **Совместимость мира:**
- При обновлении версии мир обычно совместим
- При понижении версии могут возникнуть проблемы
- **Всегда делайте бэкап перед изменением версии!**

⚠️ **Перезапуск сервера:**
- После изменения версии обязательно перезапустите сервер
- Сервер скачает новую версию при следующем запуске
- Старый `server.jar` будет заменен

⚠️ **Время загрузки:**
- Скачивание новой версии может занять 1-2 минуты
- Размер server.jar обычно 50-100MB

---

## Примеры команд

### Через Railway CLI (если установлен):

```bash
railway variables set MINECRAFT_VERSION=1.21.11
railway restart
```

### Через веб-интерфейс Railway:

1. Settings → Variables
2. Добавить/изменить `MINECRAFT_VERSION=1.21.11`
3. Settings → Restart Service

---

## Решение проблем

**Проблема: Версия не изменилась после перезапуска**

Решение:
- Проверьте, что переменная `MINECRAFT_VERSION` установлена правильно
- Проверьте логи сервера - должна быть строка "Скачивание стандартного Minecraft сервера версии..."
- Убедитесь, что сервер полностью перезапустился

**Проблема: Ошибка при скачивании версии**

Решение:
- Проверьте правильность версии (например, `1.21.11`, а не `1.21`)
- Попробуйте использовать `latest` для последней версии
- Проверьте логи на наличие ошибок сети

**Проблема: Мир не загружается после изменения версии**

Решение:
- Вернитесь к предыдущей версии
- Или обновите мир до новой версии (обычно делается автоматически)

