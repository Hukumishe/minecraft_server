# Промпт для создания веб-интерфейса управления Minecraft сервером на Lovable

## Описание проекта

Создай современное веб-приложение для управления Minecraft сервером на Railway. Приложение должно предоставлять визуальный интерфейс для загрузки кастомных сборок, настройки параметров мира и управления сервером.

## Технические требования

### Frontend
- React с TypeScript
- Современный UI (используй Tailwind CSS или shadcn/ui)
- Адаптивный дизайн (работает на десктопе и мобильных)
- Темная тема (в стиле Minecraft)

### Backend/API
- Интеграция с Railway API для управления сервером
- Интеграция с GitHub API (для загрузки сборок из Releases)
- RESTful API для управления настройками

## Основные функции

### 1. Страница загрузки кастомной сборки

**Компонент: "Upload Build"**

Функциональность:
- Поле для ввода URL кастомной сборки (.jar файл)
- Валидация URL (должен вести на .jar файл)
- Поддержка прямых ссылок:
  - GitHub Releases
  - Dropbox
  - Google Drive (с настройкой прямого доступа)
  - Любые другие прямые ссылки на .jar файлы
- Кнопка "Проверить ссылку" - проверяет доступность файла
- Превью информации о сборке (если доступно)
- Кнопка "Сохранить сборку" - сохраняет URL в переменные окружения Railway

UI элементы:
- Input поле с placeholder "https://github.com/user/repo/releases/download/v1.0/server.jar"
- Кнопка "Проверить" рядом с полем
- Индикатор загрузки при проверке
- Сообщение об успехе/ошибке
- Кнопка "Применить" для сохранения

### 2. Страница настройки мира

**Компонент: "World Settings"**

Настройки для создания мира:

**Основные настройки:**
- **Название мира** (input): по умолчанию "world"
- **Seed** (input, опционально): числовое значение для генерации мира
- **Режим игры** (select):
  - Survival (Выживание)
  - Creative (Творческий)
  - Adventure (Приключение)
  - Spectator (Наблюдатель)
- **Сложность** (select):
  - Peaceful (Мирная)
  - Easy (Легкая)
  - Normal (Обычная)
  - Hard (Сложная)
- **Разрешить PvP** (toggle): включить/выключить PvP
- **Генерировать структуры** (toggle): деревни, храмы и т.д.
- **Разрешить Nether** (toggle): доступ в Нижний мир
- **Разрешить End** (toggle): доступ в Край

**Дополнительные настройки:**
- **Максимальное количество игроков** (number input): по умолчанию 5
- **Расстояние прорисовки** (slider): 4-32 чанков
- **Расстояние симуляции** (slider): 4-32 чанков
- **Максимальный размер мира** (number input): в блоках
- **Максимальная высота постройки** (number input): по умолчанию 256

**UI элементы:**
- Карточки с настройками, сгруппированные по категориям
- Toggle переключатели для булевых значений
- Select dropdowns для выбора опций
- Number inputs с валидацией
- Sliders для числовых диапазонов
- Кнопка "Сохранить настройки" внизу страницы
- Кнопка "Сбросить к умолчаниям"

### 3. Страница управления сервером

**Компонент: "Server Control"**

Функциональность:
- **Статус сервера** (индикатор):
  - Зеленый - запущен
  - Красный - остановлен
  - Желтый - загружается
- **Кнопки управления**:
  - "Запустить сервер" (если остановлен)
  - "Остановить сервер" (если запущен)
  - "Перезапустить сервер"
- **Информация о сервере**:
  - Версия Minecraft
  - Количество игроков онлайн
  - Время работы (uptime)
  - Использование памяти
- **Логи сервера** (textarea или компонент для логов):
  - Автообновление в реальном времени
  - Возможность прокрутки
  - Фильтрация по уровню (INFO, WARN, ERROR)
- **Адрес для подключения**:
  - Отображение TCP Proxy адреса
  - Кнопка "Копировать адрес"
  - QR код для быстрого подключения (опционально)

### 4. Страница сохранения мира

**Компонент: "World Backup"**

Функциональность:
- **Автоматическое сохранение**:
  - Toggle "Автосохранение при выходе всех игроков"
  - Toggle "Автосохранение при остановке сервера"
  - Интервал автосохранения (select): 5, 10, 15, 30 минут
- **Ручное сохранение**:
  - Кнопка "Сохранить мир сейчас"
  - Прогресс сохранения
- **История сохранений**:
  - Список сохранений с датой и временем
  - Размер файла сохранения
  - Кнопка "Скачать" для каждого сохранения
  - Кнопка "Восстановить" для отката к сохранению
- **Настройки хранения**:
  - Максимальное количество сохранений (number input)
  - Автоматическое удаление старых сохранений (toggle)

### 5. Главная страница (Dashboard)

**Компонент: "Dashboard"**

Отображает:
- Карточка со статусом сервера
- Быстрый доступ к основным функциям
- График использования ресурсов (если доступно через Railway API)
- Последние действия/события
- Ссылки на все страницы

## Навигация

Структура приложения:
- **Главная** (Dashboard) - `/`
- **Загрузка сборки** - `/upload`
- **Настройки мира** - `/world-settings`
- **Управление сервером** - `/server`
- **Сохранения** - `/backups`
- **Настройки** - `/settings`

Sidebar навигация с иконками для каждой страницы.

## Интеграция с Railway

### API Endpoints для использования:

1. **Получение статуса сервера:**
   - `GET /v1/services/{serviceId}`
   - Проверка статуса деплоя

2. **Обновление переменных окружения:**
   - `PATCH /v1/variables/{variableId}`
   - Для сохранения `CUSTOM_SERVER_URL`, настроек мира и т.д.

3. **Получение логов:**
   - `GET /v1/deployments/{deploymentId}/logs`
   - Для отображения логов в реальном времени

4. **Управление деплоями:**
   - `POST /v1/deployments/{deploymentId}/restart`
   - Для перезапуска сервера

5. **Получение информации о сети:**
   - `GET /v1/services/{serviceId}/domains`
   - Для получения TCP Proxy адреса

### Переменные окружения Railway для управления:

- `CUSTOM_SERVER_URL` - URL кастомной сборки
- `MEMORY` - объем памяти (6G)
- `MINECRAFT_VERSION` - версия Minecraft
- `WORLD_SEED` - seed для мира
- `GAMEMODE` - режим игры
- `DIFFICULTY` - сложность
- `MAX_PLAYERS` - максимальное количество игроков
- `AUTO_SAVE_ENABLED` - включить автосохранение
- `AUTO_SAVE_INTERVAL` - интервал автосохранения

## Логика сохранения мира

### Автоматическое сохранение:

1. **При выходе всех игроков:**
   - Мониторинг количества игроков через логи или API
   - Когда количество игроков = 0, запустить команду `/save-all` через RCON или API
   - Создать бэкап мира

2. **При остановке сервера:**
   - Перехватить сигнал остановки
   - Выполнить `/save-all` перед остановкой
   - Создать финальный бэкап

3. **По расписанию:**
   - Использовать cron job или планировщик
   - Выполнять `/save-all` с заданным интервалом

### Реализация сохранения:

- Использовать Railway Volume для хранения мира
- Создавать архив мира (tar.gz) с timestamp
- Сохранять в Railway Volume или внешнее хранилище (S3, Google Drive API)
- Вести список сохранений в базе данных или JSON файле

## UI/UX требования

### Дизайн:
- Темная тема в стиле Minecraft (зеленые акценты, пиксельный шрифт для заголовков)
- Современные карточки и компоненты
- Плавные анимации и переходы
- Иконки для всех действий

### Обратная связь:
- Toast уведомления для всех действий (успех/ошибка)
- Индикаторы загрузки для долгих операций
- Подтверждения для критических действий (остановка сервера, удаление сохранений)

### Валидация:
- Валидация всех форм перед отправкой
- Проверка URL перед сохранением
- Валидация числовых значений (диапазоны, минимум/максимум)

## Дополнительные функции (опционально)

1. **Мониторинг в реальном времени:**
   - График использования CPU/памяти
   - Количество игроков онлайн
   - TPS (ticks per second)

2. **Управление игроками:**
   - Whitelist управление
   - Бан/кик игроков
   - Просмотр списка игроков

3. **Консоль сервера:**
   - Отправка команд на сервер
   - История команд

4. **Уведомления:**
   - Email уведомления о статусе сервера
   - Push уведомления (если реализовано)

## Технический стек (рекомендации)

- **Frontend Framework:** React 18+ с TypeScript
- **UI Library:** shadcn/ui или Tailwind UI
- **State Management:** Zustand или React Query
- **API Client:** Axios или Fetch API
- **Form Handling:** React Hook Form
- **Validation:** Zod
- **Icons:** Lucide React или Heroicons
- **Charts:** Recharts (для графиков мониторинга)

## Безопасность

- Аутентификация через Railway OAuth или API ключи
- Хранение API ключей в безопасном месте
- Валидация всех пользовательских вводов
- Защита от XSS и CSRF атак

## Примеры компонентов для создания

1. `ServerStatusCard` - карточка со статусом сервера
2. `BuildUploadForm` - форма загрузки сборки
3. `WorldSettingsForm` - форма настроек мира
4. `ServerLogsViewer` - просмотрщик логов
5. `BackupManager` - менеджер сохранений
6. `ServerControlPanel` - панель управления сервером
7. `ConnectionInfo` - информация для подключения

## Начало работы

Создай приложение с:
1. Главной страницей с навигацией
2. Страницей загрузки сборки
3. Страницей настроек мира
4. Страницей управления сервером
5. Страницей сохранений

Используй современный дизайн, темную тему и сделай интерфейс интуитивно понятным.

