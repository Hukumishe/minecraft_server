# Как поменять или удалить мир на сервере

## Важно: Понимание хранения мира

Мир Minecraft хранится в папке `/minecraft/world/` внутри контейнера. Если у вас настроен Volume, мир сохраняется там.

## Способ 1: Удаление мира через остановку и удаление Volume (РЕКОМЕНДУЕТСЯ)

### Шаг 1: Остановите сервер

1. В Railway откройте ваш проект
2. Перейдите в **Settings**
3. Нажмите **"Pause"** или **"Stop"** (если доступно)
4. Или просто перезапустите сервер после удаления мира

### Шаг 2: Удалите Volume с миром

1. В Railway: **Settings → Volumes** (или **Storage**)
2. Найдите Volume, который примонтирован к `/minecraft/world` или `/minecraft`
3. Нажмите на иконку удаления (корзина)
4. Подтвердите удаление

### Шаг 3: Создайте новый Volume (если нужно)

1. Нажмите **"+ New Volume"** или **"+ Add Volume"**
2. Укажите:
   - **Mount Path**: `/minecraft/world` (или `/minecraft` для всех данных)
   - **Name**: `minecraft-world` (или любое другое)
3. Сохраните

### Шаг 4: Запустите сервер

1. Перезапустите сервер в Railway
2. Сервер создаст новый мир автоматически

## Способ 2: Переименование мира (для создания нового, сохранив старый)

### Шаг 1: Остановите сервер

1. В Railway: **Settings → Restart Service** (или остановите)

### Шаг 2: Используйте переменные окружения

Можно настроить имя мира через переменную окружения (требует изменения скрипта).

**Альтернатива:** Переименуйте папку мира через Railway CLI (если доступен).

## Способ 3: Загрузка существующего мира

### Шаг 1: Подготовьте мир

1. У вас должен быть готовый мир (папка `world/` из другого сервера)
2. Заархивируйте папку мира в `.zip` или `.tar.gz`

### Шаг 2: Загрузите мир

**Вариант A: Через Volume (если есть доступ)**

1. Если Volume примонтирован к `/minecraft`, можно загрузить файлы напрямую
2. Но Railway CLI не предоставляет простой способ загрузки файлов

**Вариант B: Через переменные окружения (требует изменения скрипта)**

Можно добавить функционал автоматической загрузки мира из URL.

**Вариант C: Через GitHub и скрипт**

1. Загрузите мир на GitHub (как Release)
2. Измените `start.sh` для скачивания мира при первом запуске
3. Укажите URL в переменной окружения

## Способ 4: Быстрое удаление через команду в игре

Если вы оператор и хотите просто пересоздать мир:

1. Подключитесь к серверу
2. Выполните команду: `/stop` (остановит сервер)
3. В Railway удалите Volume с миром
4. Создайте новый Volume
5. Перезапустите сервер

## Управление несколькими мирами

### Создание разных миров

Minecraft поддерживает несколько миров через разные папки. Можно настроить:

1. **Мир 1**: `/minecraft/world`
2. **Мир 2**: `/minecraft/world2`
3. **Мир 3**: `/minecraft/world3`

Для переключения между мирами нужно изменить настройку в `server.properties`:
```
level-name=world
```
Измените на:
```
level-name=world2
```

### Настройка через переменные окружения

Можно добавить переменную `WORLD_NAME` для управления именем мира.

## Пошаговая инструкция: Удаление мира

### Вариант 1: Полное удаление (новый мир)

1. **Остановите сервер** в Railway
2. **Удалите Volume**:
   - Settings → Volumes
   - Найдите Volume с миром
   - Удалите его
3. **Создайте новый Volume**:
   - Mount Path: `/minecraft/world`
   - Name: `minecraft-world`
4. **Запустите сервер** - создастся новый мир

### Вариант 2: Сохранение старого мира (переименование)

Если хотите сохранить старый мир на будущее:

1. **Остановите сервер**
2. **Используйте Railway CLI** (если доступен):
   ```bash
   railway shell
   # Внутри контейнера (если доступ):
   cd /minecraft
   mv world world_backup_$(date +%Y%m%d)
   ```
3. **Запустите сервер** - создастся новый мир

## Пошаговая инструкция: Замена мира

### Загрузка готового мира

1. **Подготовьте мир**:
   - Заархивируйте папку `world/` в `.zip` или `.tar.gz`
   - Загрузите на хостинг (GitHub Releases, Dropbox и т.д.)

2. **Добавьте функционал в start.sh** (требует изменения):
   - Добавьте переменную `WORLD_URL`
   - При первом запуске скачивайте и распаковывайте мир

3. **Или используйте Railway CLI** (если доступен):
   - Подключитесь к контейнеру
   - Скачайте архив мира
   - Распакуйте в `/minecraft/world/`

## Важные замечания

⚠️ **Резервное копирование**: Перед удалением мира сделайте бэкап, если он важен!

⚠️ **Volume обязателен**: Если Volume не настроен, мир теряется при перезапуске

⚠️ **Остановка сервера**: Перед удалением/изменением мира лучше остановить сервер

⚠️ **Время загрузки**: Новый мир создается при первом запуске, это может занять время

## Автоматизация через скрипт

Можно обновить `start.sh` для автоматического управления мирами:

- Переменная `WORLD_NAME` - имя мира (по умолчанию `world`)
- Переменная `WORLD_URL` - URL для скачивания готового мира
- Переменная `DELETE_WORLD` - флаг для удаления мира при запуске

## Быстрая справка

| Действие | Способ |
|----------|--------|
| Удалить мир | Удалить Volume → Создать новый Volume → Перезапустить |
| Сохранить старый мир | Переименовать папку `world` через CLI |
| Загрузить готовый мир | Загрузить архив → Распаковать в `/minecraft/world/` |
| Создать новый мир | Удалить Volume → Создать новый → Перезапустить |
| Переключиться между мирами | Изменить `level-name` в `server.properties` |

## Резервное копирование мира

Перед удалением/изменением мира:

1. **Способ 1**: Скачайте Volume через Railway (если доступно)
2. **Способ 2**: Используйте команду `/save-all` в игре
3. **Способ 3**: Скопируйте папку `world/` через Railway CLI

## Решение проблем

### Мир не удаляется

- Убедитесь, что сервер остановлен
- Проверьте, что Volume действительно удален
- Перезапустите сервер после удаления

### Новый мир не создается

- Проверьте, что Volume создан и примонтирован правильно
- Проверьте логи сервера на наличие ошибок
- Убедитесь, что путь монтирования: `/minecraft/world`

### Старый мир все еще загружается

- Убедитесь, что старый Volume удален
- Проверьте, что создан новый Volume
- Перезапустите сервер

